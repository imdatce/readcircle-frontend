"use client";

import React, {
  createContext,
  useContext,
  useState,
  ReactNode,
  useEffect,
} from "react";
import { Language } from "@/types";

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(
  undefined,
);

const translations = {
  tr: {
    title: "Manevi Gece",
    subtitle: "Kaynak Dağıtım Platformu",
    backHome: "Ana Sayfa",
    loginButton: "GİRİŞ YAP",
    logoutButton: "Çıkış Yap",
    guestRegister: "Kayıt Ol",
    welcome: "Merhaba",
    menuLanguage: "Dil Ayarları",
    footerDesc: "Manevi birliktelik ve kaynak dağıtım platformu.",
    rightsReserved: "Tüm hakları saklıdır.",
    allahAccept: "Allah kabul etsin.",
    adminButton: "Admin olarak giriş yap!",
    loading: "Yükleniyor...",
    adminTitle: "Yönetim Paneli",
    distributedResources: "Bölüştürülecek Kaynaklar",
    individualResources: "Bireysel Kaynaklar",
    setTargetCounts: "Hedef Sayıları Belirle (Opsiyonel)",
    default: "Varsayılan",
    participantCount: "Kaç Kişi Okuyacak?",
    createDistribution: "DAĞITIMI OLUŞTUR",
    linkCreated: "Link Oluşturuldu:",
    copy: "Kopyala",
    distCode: "Kod",
    finished: "Tamamladım",
    confirmComplete: "Bu parçayı okuduğunuzu onaylıyor musunuz?",
    confirmCancel: "Bu parçayı okumaktan vazgeçmek istiyor musunuz?",
    cancelFailed: "İptal edilemedi.",
    connectionError: "Bağlantı hatası.",
    errorFetchFailed: "Veri alınamadı. Hata Kodu:",
    unexpectedError: "Beklenmedik bir hata oluştu.",
    readingTitle: "Okuma",
    closeWindow: "Pencereyi Kapat",
    close: "Kapat",
    chapter: "BAB",
    group: "Grup",
    translationTitle: "Türkçe Meali",
    translationPending: "Çeviri hazırlanıyor...",
    arabicPage: "Arapça Sayfa",
    meaningPage: "Meal Sayfa",
    otherResource: "Diğer",
    alertSelectResource: "Lütfen en az bir kaynak seçiniz.",
    confirmReset:
      "Tüm veritabanı sıfırlanıp varsayılan veriler yüklenecek. Emin misiniz?",
    errorOccurred: "Hata oluştu.",
    refresh: "Verileri Yükle / Sıfırla",
    joinTitle: "Halkaya Katıl",
    enterCode: "Dağıtım Kodunu Giriniz",
    joinButton: "Katıl",
    takeRead: "OKU",
    cancel: "KAPAT",
    completed: "TAMAMLANDI",
    remaining: "Kalan",
    tabArabic: "Arapça",
    tabLatin: "Okunuş",
    tabMeaning: "Meal",
    successReset: "Sıfırlandı!",
    successDelete: "Silindi!",
    clickToCount: "OKUDUKÇA TIKLAYINIZ",
    yourName: "Adınız",
    joinIntro: "Lütfen adınızı girip okumak istediğiniz kaynağa tıklayınız.",
    person: "Kişi",
    part: "Parça",
    target: "Hedef",
    total: "Toplam",
    pieces: "Adet",
    myCreatedTitle: "Yönettiğim Dağıtımlar",
    noCreatedYet: "Henüz bir dağıtım başlatmadın.",
    trackButton: "Takip Et",
    selectAndRead: "SEÇ & OKU",
    readText: "Oku",
    goToSite: "Siteye Git",
    full: "DOLU",
    page: "Sayfa",
    alertEnterName: "Lütfen önce yukarıya isminizi yazın.",
    alertStatus: "Durum: ",
    alertTakenSuccess: "Harika! Bu bölümü okumayı üstlendiniz.",
    alertErrorPrefix: "Hata: ",
    errorInvalidCode: "Hata: Geçersiz kod veya sunucu kapalı.",
    decrease: "AZALT",
    errorAlreadyTaken: "Bu parça maalesef başkası tarafından alınmış.",
    registerTitle: "Hesap Oluştur",
    registerSubtitle: "Aramıza katılmak için bilgilerinizi girin",
    usernameLabel: "Kullanıcı Adı",
    passwordLabel: "Şifre",
    placeholderUserExample: "Örn: ahmet123",
    placeholderPass: "******",
    registerButton: "KAYIT OL",
    registering: "Kaydediliyor...",
    haveAccount: "Zaten hesabınız var mı?",
    loginLink: "Giriş Yap",
    registerSuccess: "Kayıt Başarılı! Giriş yapabilirsiniz.",
    errorPrefix: "Hata: ",
    monitorTitle: "Dağıtım Takibi",
    monitorSubtitle: "Bir kod girerek kimin ne aldığını kontrol edin.",
    statusEmpty: "BOŞTA",
    statusTaken: "ALINDI",
    assignedTo: "Alan Kişi",
    resource: "Kaynak / Parça",
    progress: "İlerleme / Hedef",
    backToAdmin: "Admin Paneline Dön",
    occupancy: "DOLULUK",
    statusHeader: "Durum",
    targetLabel: "HEDEF",
    select: "SEÇ",
    cancelRead: "Okumaktan Vazgeç",
    createDistTitle: "Yeni Dağıtım Başlat",
    createDistDesc: "Hatim, Yasin veya Zikir halkası oluşturup linki paylaş.",
    joinDistTitle: "Bir Halkaya Katıl",
    joinDistDesc: "Sana gönderilen kodu aşağıya girerek dahil ol.",
    createButton: "OLUŞTUR",
    enterCodePlaceholder: "Dağıtım Kodu (Örn: 12345)",
    joinInputPlaceholder: "Dağıtım Kodu (Örn: 12345)",
    participantName: "Katılımcı Adı",
    imageMode: "Resim Modu",
    loginRequiredMsg: "Parça seçmek için giriş yapmalısınız.",
    loginOrRegister: "Giriş Yap veya Kayıt Ol",
    guestSubtitle: "Manevi birliktelik platformu",
    guestMessage:
      "Halkalara katılmak veya kendi dağıtımını oluşturmak için lütfen giriş yap.",
    guestCheckCode: "Sadece bir koda bakmak mı istiyorsun?",
    guestCodePlaceholder: "Kod giriniz",
    appTitle: "Manevi Gece",
    loginTitle: "Giriş Yap",
    noAccount: "Hesabın yok mu?",
    registerLink: "Hemen Kayıt Ol",
    loginError: "Kullanıcı adı veya şifre hatalı",
    myCirclesTitle: "Katıldığım Halkalar",
    noCirclesYet: "Henüz bir halkaya katılmadın.",
    continueButton: "DEVAM ET",
    placeholderUser: "Kullanıcı adınız",
    creatorLabel: "Kurucu",
  },

  ku: {
    title: "Şeva Manewî",
    appTitle: "Şeva Manewî",

    subtitle: "Platforma Belavkirina Çavkaniyan",
    backHome: "Mal",
    loginButton: "TÊKETIN",
    logoutButton: "Derketin",
    guestRegister: "Qeyd Bibe",
    welcome: "Bi xêr hatî",
    menuLanguage: "Mîhengên Ziman",
    footerDesc: "Platforma yekîtiya manewî û belavkirina çavkaniyan.",
    rightsReserved: "Hemû maf parastî ne.",
    allahAccept: "Xwedê qebûl bike.",
    adminButton: "Wekî Admin têkeve!",
    loading: "Tê barkirin...",
    adminTitle: "Panela Rêveberiyê",
    distributedResources: "Çavkaniyên Tên Parvekirin",
    individualResources: "Çavkaniyên Bireysel",
    setTargetCounts: "Hejmarên Hedef Diyar Bike (Vebijarkî)",
    default: "Pêşwext",
    participantCount: "Çend Kes Wê Bixwînin?",
    createDistribution: "BELAVKIRINÊ PÊK BÎNE",
    linkCreated: "Lînk Hat Çêkirin:",
    copy: "Kopyake",
    alertSelectResource: "Ji kerema xwe qet nebe çavkaniyek hilbijêrin.",
    confirmReset:
      "Hemû databas wê were sifirkirin û daneyên pêşwext werin barkirin. Tu piştrast î?",
    errorOccurred: "Xetayek çêbû.",
    refresh: "Daneyan Bar Bike / Sifir Bike",
    joinTitle: "Tevlî Xelekê Bibe",
    enterCode: "Koda Belavkirinê Binivîse",
    joinButton: "Tevlî Bibe",
    takeRead: "BIXWÎNE",
    finished: "Min xillas kir",

    cancel: "BIGIRE",
    completed: "TEMAM BÛ",
    remaining: "Mayî",
    tabArabic: "Erebî",
    tabLatin: "Bilêvkirin",
    tabMeaning: "Wate",
    successReset: "Hat Sifirkirin!",
    successDelete: "Hat Jêbirin!",
    clickToCount: "HER KU TE XWEND BITIKÎNE",
    yourName: "Navê Te",
    joinIntro:
      "Ji kerema xwe navê xwe binivîse û li ser çavkaniya ku dixwazî bixwînî bitikîne.",
    person: "Kes",
    distCode: "Kod",
    confirmComplete: "Tu piştrast î ku te ev beş xwendiye?",
    confirmCancel: "Tu dixwazî dev ji xwendina vê beşê berdî?",
    cancelFailed: "Betalkirin biser neket.",
    connectionError: "Xetaya girêdanê.",
    errorFetchFailed: "Dâne nehatin standin. Koda Xetayê:",
    unexpectedError: "Xetayek neçaverêkirî çêbû.",
    readingTitle: "Xwendin",
    closeWindow: "Pencereyê Bigire",
    close: "Bigire",
    chapter: "BEŞ",
    group: "Kom",
    translationTitle: "Wateya Kurdî",
    translationPending: "Wergêr tê amadekirin...",
    arabicPage: "Rûpela Erebî",
    meaningPage: "Rûpela Wateyê",
    otherResource: "Yên din",
    part: "Parçe",
    target: "Hedef",
    total: "Giştî",
    pieces: "Heb",
    myCreatedTitle: "Belavkirinên Min ên Rêvebir",
    noCreatedYet: "Hêj te belavkirinek neda destpêkirin.",
    trackButton: "Bişopîne",
    selectAndRead: "HILBIJÊRE & BIXWÎNE",
    readText: "Bixwîne",
    goToSite: "Biçe Malperê",
    full: "TIJE",
    page: "Rûpel",
    alertEnterName: "Ji kerema xwe pêşî navê xwe li jor binivîse.",
    alertStatus: "Rewş: ",
    alertTakenSuccess: "Gelek baş e! Te ev beş girt ser xwe.",
    alertErrorPrefix: "Xeta: ",
    errorInvalidCode: "Xeta: Kod nederbasdar e an server girtî ye.",
    decrease: "KÊM BIKE",
    errorAlreadyTaken:
      "Mixabin, ev parçe ji aliyê kesekî din ve hatiye girtin.",
    registerTitle: "Hesab Çêbike",
    registerSubtitle: "Ji bo tevlî me bibî agahiyên xwe binivîse",
    usernameLabel: "Navê Bikarhêner",
    passwordLabel: "Şîfre",
    placeholderUserExample: "Mînak: ahmet123",
    placeholderPass: "******",
    registerButton: "QEYD BIBE",
    registering: "Tê qeydkirin...",
    haveAccount: "Ma hesabê te heye?",
    loginLink: "Têkeve",
    registerSuccess: "Qeyd serkeftî bû! Niha dikarî têkevî.",
    errorPrefix: "Xeta: ",
    monitorTitle: "Şopandina Belavkirinê",
    monitorSubtitle: "Bi nivîsandina kodê kontrol bike ka kî çi girtiye.",
    statusEmpty: "VALA",
    statusTaken: "HAT GIRTIN",
    assignedTo: "Kesê Girtiye",
    resource: "Çavkanî / Parçe",
    progress: "Pêşveçûn / Hedef",
    backToAdmin: "Vegere Panela Admin",
    occupancy: "TIJEBÛN",
    statusHeader: "Rewş",
    targetLabel: "HEDEF",
    select: "HILBIJÊRE",
    cancelRead: "Xwendinê Betal Bike",
    createDistTitle: "Xeleka Nû Destpê Bike",
    createDistDesc: "Xeleka Hatim, Yasîn an Zikirê çêbike û lînkê parve bike.",
    joinDistTitle: "Tevlî Xelekê Bibe",
    joinDistDesc:
      "Koda ku ji te re hatiye şandin li jêr binivîse û beşdar bibe.",
    createButton: "PÊK BÎNE",
    enterCodePlaceholder: "Koda Belavkirinê (Mînak: 12345)",
    joinInputPlaceholder: "Koda Belavkirinê (Mînak: 12345)",
    participantName: "Navê Beşdar",
    imageMode: "Moda Wêneyê",
    loginRequiredMsg: "Ji bo hilbijartina parçeyekê divê têkevî.",
    loginOrRegister: "Têkeve an Qeyd Bibe",
    guestSubtitle: "Platforma yekîtiya manewî",
    guestMessage:
      "Ji bo tevlî xelekan bibî an belavkirina xwe çêbikî ji kerema xwe têkeve.",
    guestCheckCode: "Tenê dixwazî li kodekê binêrî?",
    guestCodePlaceholder: "Kod binivîse",
    loginTitle: "Têkeve",
    noAccount: "Ma hesabê te tune?",
    registerLink: "Hemen Qeyd Bibe",
    loginError: "Navê bikarhêner an şîfre şaş e",
    myCirclesTitle: "Xelekên Ez Tevlî Bûm",
    noCirclesYet: "Hêj tevlî tu xelekê nebûyî.",
    continueButton: "DEWAM BIKE",
    placeholderUser: "Navê te yê bikarhêner",
    creatorLabel: "Avaker",
  },
  en: {
    title: "Spiritual Night",
    subtitle: "Resource Distribution Platform",
    backHome: "Home",
    loginButton: "LOGIN",
    logoutButton: "Logout",
    guestRegister: "Register",
    welcome: "Welcome",
    confirmComplete: "Do you confirm that you have read this part?",
    confirmCancel: "Do you want to cancel reading this part?",
    cancelFailed: "Could not cancel.",
    connectionError: "Connection error.",
    errorFetchFailed: "Failed to fetch data. Error Code:",
    unexpectedError: "An unexpected error occurred.",
    readingTitle: "Reading",
    closeWindow: "Close Window",
    close: "Close",
    chapter: "Chapter",
    group: "Group",
    translationTitle: "Translation",
    translationPending: "Translation pending...",
    arabicPage: "Arabic Page",
    meaningPage: "Meaning Page",
    otherResource: "Other",

    menuLanguage: "Language Settings",
    footerDesc: "Spiritual connection and resource distribution platform.",
    rightsReserved: "All rights reserved.",
    allahAccept: "May Allah accept it.",
    adminButton: "Login as Admin!",
    loading: "Loading...",
    adminTitle: "Admin Dashboard",
    distributedResources: "Shared Resources",
    individualResources: "Fixed Resources",
    setTargetCounts: "Set Target Counts (Optional)",
    default: "Default",
    participantCount: "Number of Participants?",
    createDistribution: "CREATE DISTRIBUTION",
    linkCreated: "Link Created:",
    copy: "Copy",
    alertSelectResource: "Please select at least one resource.",
    confirmReset: "Database will be reset to default data. Are you sure?",
    errorOccurred: "An error occurred.",
    refresh: "Load / Reset Data",
    joinTitle: "Join the Circle",
    enterCode: "Enter Distribution Code",
    joinButton: "Join",
    takeRead: "READ",
    cancel: "CANCEL",
    completed: "COMPLETED",
    remaining: "Remaining",
    tabArabic: "Arabic",
    tabLatin: "Transliteration",
    tabMeaning: "Translation",
    successReset: "Reset successful!",
    successDelete: "Deleted!",
    clickToCount: "CLICK AS YOU READ",
    yourName: "Your Name",
    joinIntro: "Please enter your name and click on a resource to read.",
    person: "Person",
    part: "Part",
    target: "Target",
    total: "Total",
    pieces: "Pieces",
    myCreatedTitle: "My Distributions",
    noCreatedYet: "You haven't started any distribution yet.",
    trackButton: "Show Status",
    selectAndRead: "SELECT & READ",
    readText: "Read",
    goToSite: "Go to Site",
    full: "TAKEN",
    page: "Page",
    alertEnterName: "Please enter your name above first.",
    alertStatus: "Status: ",
    alertTakenSuccess: "Great! You have successfully taken this part.",
    alertErrorPrefix: "Error: ",
    errorInvalidCode: "Error: Invalid code or server is down.",
    decrease: "DECREASE",
    errorAlreadyTaken:
      "Unfortunately, this part has already been taken by someone else.",
    registerTitle: "Create Account",
    finished: "Finished",
    registerSubtitle: "Enter your details to join us",
    usernameLabel: "Username",
    passwordLabel: "Password",
    placeholderUserExample: "e.g. john123",
    placeholderPass: "******",
    registerButton: "REGISTER",
    registering: "Registering...",
    haveAccount: "Already have an account?",
    loginLink: "Login",
    registerSuccess: "Registration successful! You can login now.",
    errorPrefix: "Error: ",
    monitorTitle: "Distribution Monitor",
    monitorSubtitle: "Enter a code to check who took what.",
    statusEmpty: "AVAILABLE",
    statusTaken: "TAKEN",
    assignedTo: "Assigned To",
    resource: "Resource / Part",
    progress: "Progress / Target",
    backToAdmin: "Back to Dashboard",
    occupancy: "OCCUPANCY",
    statusHeader: "Status",
    targetLabel: "TARGET",
    select: "SELECT",
    cancelRead: "Cancel Reading",
    createDistTitle: "Start New Circle",
    createDistDesc:
      "Create a Quran, Yasin, or Dhikr circle and share the link.",
    joinDistTitle: "Join a Circle",
    joinDistDesc: "Enter the code shared with you to participate.",
    createButton: "CREATE",
    enterCodePlaceholder: "Distribution Code (e.g. 12345)",
    joinInputPlaceholder: "Distribution Code (e.g. 12345)",
    participantName: "Participant Name",
    imageMode: "Image Mode",
    loginRequiredMsg: "You must log in to select a part.",
    loginOrRegister: "Login or Register",
    guestSubtitle: "Spiritual connection platform",
    guestMessage:
      "Please login to join circles or create your own distribution.",
    guestCheckCode: "Just want to check a code?",
    guestCodePlaceholder: "Enter code",
    appTitle: "Read Circle",
    loginTitle: "Login",
    noAccount: "Don't have an account?",
    registerLink: "Register Now",
    loginError: "Invalid username or password",
    myCirclesTitle: "My Circles",
    noCirclesYet: "You haven't joined any circles yet.",
    continueButton: "CONTINUE",
    distCode: "Code",
    placeholderUser: "Your username",
    creatorLabel: "Creator",
  },
};

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [language, setLanguageState] = useState<Language>("tr");

  useEffect(() => {
    const savedLanguage = localStorage.getItem("appLanguage") as Language;

    if (
      savedLanguage &&
      (savedLanguage === "tr" ||
        savedLanguage === "en" ||
        savedLanguage === "ku")
    ) {
      if (savedLanguage !== language) {
        setLanguageState(savedLanguage);
      }
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
    localStorage.setItem("appLanguage", lang);
  };

  const t = (key: string): string => {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    const langData = (translations as any)[language];
    return langData?.[key] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error("useLanguage must be used within a LanguageProvider");
  }
  return context;
}
